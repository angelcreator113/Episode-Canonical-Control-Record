/* ============================================================
   PNOS Character Registry â€” Light Parchment Theme
   Location: frontend/src/pages/CharacterRegistryPage.css
   ============================================================ */

/* ---------- CSS custom props ---------- */
.cr-page {
  --bg:       #faf8f5;
  --surface:  #ffffff;
  --surface2: #f5f2ed;
  --surface3: #ede8e0;
  --border:   #e0d8cc;
  --border2:  #d0c5b5;
  --gold:     #b8963a;
  --gold-dim: #8a7535;
  --gold-bg:  rgba(201, 168, 76, 0.1);
  --ink:      #1a1510;
  --ink-dim:  #6b6050;
  --ink-faint:#9a9080;
  --white:    #1a1510;
  --red:      #d43a2a;
  --green:    #3d9e42;
  --blue:     #5570d2;
  --purple:   #8b45b5;
  --cyan:     #2fa8a0;
  --orange:   #c07830;

  /* role type palette */
  --role-protagonist: var(--gold);
  --role-pressure:    var(--red);
  --role-mirror:      var(--blue);
  --role-support:     var(--green);
  --role-shadow:      var(--purple);
  --role-special:     var(--cyan);

  /* fonts */
  --serif:  'Cormorant Garamond', 'Georgia', serif;
  --sans:   'DM Sans', 'Inter', -apple-system, sans-serif;
  --mono:   'DM Mono', 'JetBrains Mono', monospace;

  font-family: var(--sans);
  color: var(--ink);
  background: var(--bg);
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
}

/* noise overlay */
.cr-page::before {
  content: '';
  position: fixed;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.015'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
}

/* ---------- Layout ---------- */
.cr-layout {
  display: flex;
  min-height: 100vh;
  position: relative;
  z-index: 1;
}

/* ========== INTERNAL SIDEBAR ========== */
.cr-sidebar {
  width: 260px;
  min-width: 260px;
  background: var(--surface);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  height: 100vh;
  position: sticky;
  top: 0;
}

.cr-sidebar-header {
  padding: 24px 20px 16px;
  border-bottom: 1px solid var(--border);
}

.cr-sidebar-brand {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--gold-dim);
  margin-bottom: 4px;
}

.cr-sidebar-title {
  font-family: var(--serif);
  font-size: 20px;
  font-weight: 600;
  color: var(--gold);
  margin: 0;
}

.cr-sidebar-book-tag {
  font-size: 12px;
  color: var(--ink-dim);
  margin-top: 4px;
}

.cr-sidebar-nav {
  flex: 1;
  padding: 12px 0;
  overflow-y: auto;
}

.cr-nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 20px;
  cursor: pointer;
  transition: all 0.15s ease;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  color: var(--ink-dim);
  font-family: var(--sans);
  font-size: 13px;
  position: relative;
}

.cr-nav-item:hover {
  background: var(--gold-bg);
  color: var(--ink);
}

.cr-nav-item.active {
  background: var(--gold-bg);
  color: var(--gold);
  border-left: 2px solid var(--gold);
}

.cr-nav-item .cr-nav-icon {
  font-size: 16px;
  width: 20px;
  text-align: center;
  flex-shrink: 0;
}

.cr-nav-item .cr-nav-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.cr-nav-item .cr-nav-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  flex-shrink: 0;
}

.cr-nav-dot.draft      { background: var(--ink-faint); }
.cr-nav-dot.accepted   { background: var(--green); }
.cr-nav-dot.declined   { background: var(--red); }
.cr-nav-dot.finalized  { background: var(--gold); }

.cr-nav-divider {
  height: 1px;
  background: var(--border);
  margin: 8px 20px;
}

.cr-sidebar-footer {
  padding: 16px 20px;
  border-top: 1px solid var(--border);
  display: flex;
  gap: 8px;
}

.cr-sidebar-btn {
  flex: 1;
  padding: 8px 12px;
  font-size: 11px;
  font-family: var(--mono);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--ink-dim);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.cr-sidebar-btn:hover {
  border-color: var(--gold-dim);
  color: var(--gold);
  background: var(--gold-bg);
}

.cr-sidebar-btn.primary {
  background: var(--gold);
  color: #ffffff;
  border-color: var(--gold);
  font-weight: 600;
}

.cr-sidebar-btn.primary:hover {
  background: #d4b45a;
}

/* ========== MAIN CONTENT ========== */
.cr-main {
  flex: 1;
  padding: 32px 40px;
  overflow-y: auto;
  max-width: 1100px;
}

/* ---------- Top bar ---------- */
.cr-topbar {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 28px;
}

.cr-topbar-back {
  background: none;
  border: 1px solid var(--border);
  color: var(--ink-dim);
  padding: 6px 14px;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
  font-family: var(--sans);
}

.cr-topbar-back:hover {
  border-color: var(--gold-dim);
  color: var(--gold);
}

.cr-topbar-breadcrumb {
  font-family: var(--mono);
  font-size: 11px;
  letter-spacing: 1px;
  color: var(--ink-faint);
  text-transform: uppercase;
}

.cr-topbar-breadcrumb span {
  color: var(--gold-dim);
}

/* ---------- Overview header ---------- */
.cr-overview-header {
  margin-bottom: 32px;
}

.cr-overview-header h1 {
  font-family: var(--serif);
  font-size: 32px;
  font-weight: 600;
  color: var(--gold);
  margin: 0 0 6px;
}

.cr-overview-header .cr-subtitle {
  font-size: 14px;
  color: var(--ink-dim);
  margin: 0 0 16px;
}

.cr-core-rule {
  background: var(--surface);
  border: 1px solid var(--border);
  border-left: 3px solid var(--gold);
  padding: 14px 20px;
  border-radius: 4px;
  font-size: 13px;
  color: var(--ink);
  font-style: italic;
}

.cr-core-rule strong {
  color: var(--gold);
  font-style: normal;
  font-weight: 600;
  margin-right: 6px;
}

/* ---------- Stats bar ---------- */
.cr-stats {
  display: flex;
  gap: 16px;
  margin-bottom: 28px;
  flex-wrap: wrap;
}

.cr-stat {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  font-size: 12px;
  font-family: var(--mono);
  color: var(--ink-dim);
}

.cr-stat-count {
  font-size: 16px;
  font-weight: 700;
  color: var(--gold);
}

.cr-stat.draft .cr-stat-count    { color: var(--ink-faint); }
.cr-stat.accepted .cr-stat-count { color: var(--green); }
.cr-stat.finalized .cr-stat-count{ color: var(--gold); }
.cr-stat.declined .cr-stat-count { color: var(--red); }

/* ========== OVERVIEW GRID ========== */
.cr-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

/* ---------- Character card ---------- */
.cr-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

.cr-card:hover {
  border-color: var(--border2);
  transform: translateY(-2px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
}

.cr-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
}

/* role-based top stripe */
.cr-card.role-protagonist::before { background: var(--role-protagonist); }
.cr-card.role-pressure::before    { background: var(--role-pressure); }
.cr-card.role-mirror::before      { background: var(--role-mirror); }
.cr-card.role-support::before     { background: var(--role-support); }
.cr-card.role-shadow::before      { background: var(--role-shadow); }
.cr-card.role-special::before     { background: var(--role-special); }

.cr-card-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 12px;
}

.cr-card-icon {
  font-size: 28px;
  line-height: 1;
}

.cr-card-status {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 1px;
  text-transform: uppercase;
  padding: 3px 8px;
  border-radius: 3px;
  border: 1px solid;
}

.cr-card-status.draft {
  color: var(--ink-faint);
  border-color: var(--border);
  background: var(--surface2);
}

.cr-card-status.accepted {
  color: var(--green);
  border-color: rgba(61, 158, 66, 0.3);
  background: rgba(61, 158, 66, 0.08);
}

.cr-card-status.declined {
  color: var(--red);
  border-color: rgba(212, 58, 42, 0.3);
  background: rgba(212, 58, 42, 0.08);
}

.cr-card-status.finalized {
  color: var(--gold);
  border-color: rgba(201, 168, 76, 0.3);
  background: rgba(201, 168, 76, 0.08);
}

.cr-card-name {
  font-family: var(--serif);
  font-size: 18px;
  font-weight: 600;
  color: var(--white);
  margin: 0 0 2px;
}

.cr-card-subtitle {
  font-size: 12px;
  color: var(--ink-dim);
  margin: 0 0 10px;
}

.cr-card-role {
  display: inline-block;
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 1px;
  text-transform: uppercase;
  padding: 3px 8px;
  border-radius: 3px;
  margin-bottom: 10px;
}

.cr-card-role.protagonist { color: var(--role-protagonist); background: rgba(184,150,58,0.1); }
.cr-card-role.pressure    { color: var(--role-pressure);    background: rgba(212,58,42,0.08); }
.cr-card-role.mirror      { color: var(--role-mirror);      background: rgba(85,112,210,0.08); }
.cr-card-role.support     { color: var(--role-support);     background: rgba(61,158,66,0.08); }
.cr-card-role.shadow      { color: var(--role-shadow);      background: rgba(139,69,181,0.08); }
.cr-card-role.special     { color: var(--role-special);     background: rgba(47,168,160,0.08); }

.cr-card-quote {
  font-size: 12px;
  color: var(--ink-dim);
  font-style: italic;
  line-height: 1.5;
  border-left: 2px solid var(--border2);
  padding-left: 10px;
  margin: 0;
}

/* Special algorithm card */
.cr-card.algorithm-card {
  border-color: var(--cyan);
  border-style: dashed;
}

.cr-card.algorithm-card .cr-card-icon {
  animation: cr-pulse 2s ease-in-out infinite;
}

@keyframes cr-pulse {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0.4; }
}

/* ========== CHARACTER DETAIL VIEW ========== */
.cr-detail {
  max-width: 720px;
}

.cr-detail-header {
  display: flex;
  align-items: flex-start;
  gap: 20px;
  margin-bottom: 28px;
}

.cr-detail-icon {
  font-size: 48px;
  line-height: 1;
  padding: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
}

.cr-detail-meta {
  flex: 1;
}

.cr-detail-meta h2 {
  font-family: var(--serif);
  font-size: 28px;
  font-weight: 600;
  color: var(--white);
  margin: 0 0 4px;
}

.cr-detail-meta .cr-subtitle {
  font-size: 14px;
  color: var(--ink-dim);
  margin: 0 0 10px;
}

.cr-detail-badges {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.cr-badge {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 1px;
  text-transform: uppercase;
  padding: 4px 10px;
  border-radius: 3px;
  border: 1px solid;
}

.cr-badge.role-protagonist { color: var(--role-protagonist); border-color: rgba(184,150,58,0.3); background: rgba(184,150,58,0.06); }
.cr-badge.role-pressure    { color: var(--role-pressure);    border-color: rgba(212,58,42,0.3);  background: rgba(212,58,42,0.06); }
.cr-badge.role-mirror      { color: var(--role-mirror);      border-color: rgba(85,112,210,0.3);background: rgba(85,112,210,0.06); }
.cr-badge.role-support     { color: var(--role-support);     border-color: rgba(61,158,66,0.3); background: rgba(61,158,66,0.06); }
.cr-badge.role-shadow      { color: var(--role-shadow);      border-color: rgba(139,69,181,0.3); background: rgba(139,69,181,0.06); }
.cr-badge.role-special     { color: var(--role-special);     border-color: rgba(47,168,160,0.3); background: rgba(47,168,160,0.06); }

.cr-badge.mode {
  color: var(--ink-dim);
  border-color: var(--border);
  background: var(--surface2);
}

/* ---------- Detail sections ---------- */
.cr-section {
  margin-bottom: 24px;
}

.cr-section-label {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--gold-dim);
  margin-bottom: 8px;
}

.cr-section-content {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 16px;
}

.cr-section-content p {
  margin: 0;
  font-size: 13px;
  line-height: 1.6;
  color: var(--ink);
}

.cr-quote {
  font-size: 14px;
  font-style: italic;
  color: var(--ink);
  border-left: 3px solid var(--gold);
  padding: 12px 16px;
  background: var(--surface);
  border-radius: 0 4px 4px 0;
}

/* ---------- Name selection ---------- */
.cr-name-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.cr-name-btn {
  padding: 8px 16px;
  font-family: var(--serif);
  font-size: 15px;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--ink-dim);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.cr-name-btn:hover {
  border-color: var(--gold-dim);
  color: var(--gold);
  background: var(--gold-bg);
}

.cr-name-btn.selected {
  background: var(--gold);
  color: #ffffff;
  border-color: var(--gold);
  font-weight: 600;
}

.cr-name-btn.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ---------- Personality matrix ---------- */
.cr-matrix {
  width: 100%;
  border-collapse: collapse;
}

.cr-matrix th,
.cr-matrix td {
  padding: 10px 14px;
  text-align: left;
  font-size: 13px;
  border-bottom: 1px solid var(--border);
}

.cr-matrix th {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--gold-dim);
  background: var(--surface2);
}

.cr-matrix td:first-child {
  font-weight: 600;
  color: var(--ink);
  width: 160px;
}

.cr-matrix td:last-child {
  color: var(--ink-dim);
  font-family: var(--mono);
  font-size: 12px;
}

/* ---------- Belief pills ---------- */
.cr-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.cr-pill {
  padding: 6px 14px;
  font-size: 12px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 20px;
  color: var(--ink-dim);
}

/* ---------- Action buttons ---------- */
.cr-actions {
  display: flex;
  gap: 12px;
  margin-top: 28px;
  padding-top: 20px;
  border-top: 1px solid var(--border);
}

.cr-action-btn {
  padding: 10px 24px;
  font-family: var(--mono);
  font-size: 11px;
  letter-spacing: 1px;
  text-transform: uppercase;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
  font-weight: 600;
  border: 1px solid;
}

.cr-action-btn.accept {
  background: rgba(61, 158, 66, 0.08);
  border-color: var(--green);
  color: var(--green);
}

.cr-action-btn.accept:hover {
  background: var(--green);
  color: #ffffff;
}

.cr-action-btn.decline {
  background: rgba(212, 58, 42, 0.06);
  border-color: var(--red);
  color: var(--red);
}

.cr-action-btn.decline:hover {
  background: var(--red);
  color: #ffffff;
}

.cr-action-btn.finalize {
  background: rgba(201, 168, 76, 0.12);
  border-color: var(--gold);
  color: var(--gold);
}

.cr-action-btn.finalize:hover {
  background: var(--gold);
  color: #ffffff;
}

.cr-action-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.cr-action-btn.edit {
  background: transparent;
  color: var(--gold);
  border-color: rgba(201, 168, 76, 0.3);
}
.cr-action-btn.edit:hover {
  background: rgba(201, 168, 76, 0.08);
  border-color: var(--gold);
}

/* ---------- Edit Form ---------- */
.cr-edit-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 14px;
  border-bottom: 1px solid var(--border);
}
.cr-edit-header h2 {
  font-family: var(--serif);
  font-size: 20px;
  font-style: italic;
  color: var(--ink);
  margin: 0;
}
.cr-edit-header-actions {
  display: flex;
  gap: 8px;
}

.cr-edit-form {
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.cr-edit-row {
  display: flex;
  gap: 12px;
}
.cr-edit-row > * {
  flex: 1;
}
.cr-edit-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.cr-edit-field.small {
  max-width: 80px;
}
.cr-edit-label {
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.12em;
  color: var(--ink-faint);
  text-transform: uppercase;
}
.cr-edit-input {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid var(--border);
  border-radius: 3px;
  font-family: var(--serif);
  font-size: 14px;
  font-style: italic;
  color: var(--ink);
  padding: 8px 10px;
  outline: none;
  transition: border-color 0.15s;
}
.cr-edit-input:focus {
  border-color: var(--gold);
}
.cr-edit-select {
  cursor: pointer;
  font-style: normal;
  font-family: var(--mono);
  font-size: 12px;
}
.cr-edit-textarea {
  resize: vertical;
  line-height: 1.6;
  min-height: 60px;
}
.cr-edit-hint {
  font-family: var(--mono);
  font-size: 8px;
  color: var(--ink-faint);
  letter-spacing: 0.06em;
}

/* ---------- Toast ---------- */
.cr-toast {
  position: fixed;
  bottom: 32px;
  right: 32px;
  background: #ffffff;
  border: 1px solid var(--border);
  border-left: 3px solid var(--gold);
  padding: 14px 20px;
  border-radius: 4px;
  color: var(--ink);
  font-size: 13px;
  z-index: 9999;
  animation: cr-toast-in 0.3s ease;
  box-shadow: 0 8px 32px rgba(0,0,0,0.1);
}

.cr-toast.success { border-left-color: var(--green); }
.cr-toast.error   { border-left-color: var(--red); }

@keyframes cr-toast-in {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ========== REGISTRY LIST VIEW ========== */
.cr-registry-list {
  max-width: 700px;
  margin: 0 auto;
  padding-top: 40px;
}

.cr-registry-list h1 {
  font-family: var(--serif);
  font-size: 32px;
  font-weight: 600;
  color: var(--gold);
  margin: 0 0 8px;
}

.cr-registry-list .cr-subtitle {
  font-size: 14px;
  color: var(--ink-dim);
  margin-bottom: 28px;
}

.cr-registry-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 20px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.cr-registry-item:hover {
  border-color: var(--gold-dim);
  transform: translateX(4px);
}

.cr-registry-item-left h3 {
  font-family: var(--serif);
  font-size: 18px;
  color: var(--white);
  margin: 0 0 2px;
}

.cr-registry-item-left p {
  font-size: 12px;
  color: var(--ink-dim);
  margin: 0;
}

.cr-registry-item-right {
  text-align: right;
  font-family: var(--mono);
  font-size: 11px;
  color: var(--ink-faint);
}

.cr-registry-item-right .count {
  font-size: 16px;
  color: var(--gold);
  font-weight: 700;
}

.cr-create-btn {
  display: block;
  width: 100%;
  padding: 18px;
  background: var(--gold-bg);
  border: 1px dashed var(--gold-dim);
  border-radius: 6px;
  color: var(--gold);
  font-family: var(--serif);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.15s;
  text-align: center;
  margin-top: 16px;
}

.cr-create-btn:hover {
  background: rgba(201, 168, 76, 0.15);
  border-color: var(--gold);
}

/* ---------- Loading & empty ---------- */
.cr-loading {
  text-align: center;
  padding: 60px 20px;
  color: var(--ink-dim);
  font-family: var(--mono);
  font-size: 13px;
}

.cr-empty {
  text-align: center;
  padding: 60px 20px;
  color: var(--ink-faint);
}

.cr-empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.cr-empty p {
  font-size: 14px;
  margin: 0 0 4px;
}

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
  .cr-layout {
    flex-direction: column;
  }

  .cr-sidebar {
    width: 100%;
    min-width: 100%;
    height: auto;
    position: relative;
    max-height: 200px;
  }

  .cr-sidebar-nav {
    display: flex;
    overflow-x: auto;
    padding: 8px;
    gap: 4px;
  }

  .cr-nav-item {
    padding: 8px 12px;
    white-space: nowrap;
    font-size: 12px;
  }

  .cr-nav-item.active {
    border-left: none;
    border-bottom: 2px solid var(--gold);
  }

  .cr-main {
    padding: 20px 16px;
  }

  .cr-grid {
    grid-template-columns: 1fr;
  }

  .cr-detail-header {
    flex-direction: column;
    gap: 12px;
  }

  .cr-actions {
    flex-wrap: wrap;
  }
}

@media (max-width: 480px) {
  .cr-overview-header h1 {
    font-size: 24px;
  }

  .cr-stats {
    flex-direction: column;
  }
}
